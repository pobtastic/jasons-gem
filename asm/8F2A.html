<!DOCTYPE html>
<html>
<head>
<title>Jason's Gem: Routine at 8F2A</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="8F14.html">8F14</a>
</td>
<td class="up">Up: <a href="../maps/all.html#8f2a">Map</a></td>
<td class="next">
Next: <a href="9060.html">9060</a>
</td>
</tr>
</table>
<div class="description">8F2A: Routine at 8F2A</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="97AC.html">StartGame</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Congrats_Print</td>
<td class="address-2"><span id="8f2a"></span>8F2A</td>
<td class="instruction">LD HL,$4000</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f2d"></span>8F2D</td>
<td class="instruction">LD DE,$4001</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f30"></span>8F30</td>
<td class="instruction">LD (HL),$00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f32"></span>8F32</td>
<td class="instruction">LD BC,$17FF</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f35"></span>8F35</td>
<td class="instruction">LDIR</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f37"></span>8F37</td>
<td class="instruction">LD HL,$5800</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f3a"></span>8F3A</td>
<td class="instruction">LD DE,$5801</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f3d"></span>8F3D</td>
<td class="instruction">LD BC,$02FF</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f40"></span>8F40</td>
<td class="instruction">LD (HL),$07</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f42"></span>8F42</td>
<td class="instruction">LDIR</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f44"></span>8F44</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f45"></span>8F45</td>
<td class="instruction">OUT ($FE),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="8f47"></span>
<div class="comments">
<div class="paragraph">
Open the upper screen channel.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f47"></span>8F47</td>
<td class="instruction">LD A,$02</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=02.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f49"></span>8F49</td>
<td class="instruction">CALL $1601</td>
<td class="comment-1" rowspan="1">Call <a href="https://skoolkit.ca/disassemblies/rom/hex/asm/1601.html">CHAN_OPEN</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f4c"></span>8F4C</td>
<td class="instruction">LD DE,$8F71</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="8F2A.html#8f71">8F71</a> (text).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f4f"></span>8F4F</td>
<td class="instruction">LD BC,$00BF</td>
<td class="comment-1" rowspan="1"><span class="register">BC</span>=BF (counter).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f52"></span>8F52</td>
<td class="instruction">CALL $203C</td>
<td class="comment-1" rowspan="1">Call <a href="https://skoolkit.ca/disassemblies/rom/hex/asm/1FFC.html#203C">PR_STRING</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f55"></span>8F55</td>
<td class="instruction">CALL <a href="8F2A.html#9048">Congrats_Keyboard</a></td>
<td class="comment-1" rowspan="1">Call <a href="8F2A.html#9048">Congrats_Keyboard</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f58"></span>8F58</td>
<td class="instruction">LD A,($5BA8)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f5b"></span>8F5B</td>
<td class="instruction">CP $02</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f5d"></span>8F5D</td>
<td class="instruction">JP Z,<a href="8F2A.html#9058">Congrats_Joystick</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">Congrats_Keyboard_Loop</td>
<td class="address-2"><span id="8f60"></span>8F60</td>
<td class="instruction">LD A,$7F</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f62"></span>8F62</td>
<td class="instruction">IN A,($FE)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f64"></span>8F64</td>
<td class="instruction">AND $01</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f66"></span>8F66</td>
<td class="instruction">RET Z</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f67"></span>8F67</td>
<td class="instruction">LD A,$EF</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f69"></span>8F69</td>
<td class="instruction">IN A,($FE)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f6b"></span>8F6B</td>
<td class="instruction">AND $01</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f6d"></span>8F6D</td>
<td class="instruction">RET Z</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f6e"></span>8F6E</td>
<td class="instruction">JP <a href="8F2A.html#8f60">Congrats_Keyboard_Loop</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f71"></span>8F71</td>
<td class="instruction">DEFB $11,$00</td>
<td class="comment-1" rowspan="1">PAPER 0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f73"></span>8F73</td>
<td class="instruction">DEFB $16,$06,$00</td>
<td class="comment-1" rowspan="1">PRINT AT (6, 0).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f76"></span>8F76</td>
<td class="instruction">DEFB $10,$05</td>
<td class="comment-1" rowspan="1">INK 5.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f78"></span>8F78</td>
<td class="instruction">DEFM "THE MISSION HAS NOW BEEN "</td>
<td class="comment-1" rowspan="1">"<img alt="congratscopy-1" src="../images/font/congratscopy-1.png" />".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f91"></span>8F91</td>
<td class="instruction">DEFB $16,$07,$13</td>
<td class="comment-1" rowspan="1">PRINT AT (7, 19).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8f94"></span>8F94</td>
<td class="instruction">DEFM "ACCOMPLISHED,"</td>
<td class="comment-1" rowspan="1">"<img alt="congratscopy-2" src="../images/font/congratscopy-2.png" />".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8fa1"></span>8FA1</td>
<td class="instruction">DEFB $16,$09,$00</td>
<td class="comment-1" rowspan="1">PRINT AT (9, 0).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8fa4"></span>8FA4</td>
<td class="instruction">DEFB $10,$06</td>
<td class="comment-1" rowspan="1">INK 6.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8fa6"></span>8FA6</td>
<td class="instruction">DEFM "WITH A BONUS OF 3000 TO YOUR"</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8fc2"></span>8FC2</td>
<td class="instruction">DEFB $16,$0A,$1A</td>
<td class="comment-1" rowspan="1">PRINT AT (10, 26).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8fc5"></span>8FC5</td>
<td class="instruction">DEFM "SCORE,"</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8fcb"></span>8FCB</td>
<td class="instruction">DEFB $16,$0C,$00</td>
<td class="comment-1" rowspan="1">PRINT AT (12, 0).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8fce"></span>8FCE</td>
<td class="instruction">DEFB $10,$05</td>
<td class="comment-1" rowspan="1">INK 5.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8fd0"></span>8FD0</td>
<td class="instruction">DEFM "BUT I AM SURE YOUR SCORE COULD"</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8fee"></span>8FEE</td>
<td class="instruction">DEFB $16,$0D,$16</td>
<td class="comment-1" rowspan="1">PRINT AT (13, 22).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ff1"></span>8FF1</td>
<td class="instruction">DEFM "BE HIGHER,"</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ffb"></span>8FFB</td>
<td class="instruction">DEFB $16,$0F,$00</td>
<td class="comment-1" rowspan="1">PRINT AT (15, 0).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8ffe"></span>8FFE</td>
<td class="instruction">DEFB $10,$06</td>
<td class="comment-1" rowspan="1">INK 6.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9000"></span>9000</td>
<td class="instruction">DEFM "SO PRESS THE "</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="900d"></span>900D</td>
<td class="instruction">DEFB $10,$06</td>
<td class="comment-1" rowspan="1">INK 6.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="900f"></span>900F</td>
<td class="instruction">DEFB $11,$02</td>
<td class="comment-1" rowspan="1">PAPER 2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9011"></span>9011</td>
<td class="instruction">DEFB $12,$01</td>
<td class="comment-1" rowspan="1">FLASH "ON".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9013"></span>9013</td>
<td class="instruction">DEFB $13,$01</td>
<td class="comment-1" rowspan="1">BRIGHT "ON".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9015"></span>9015</td>
<td class="instruction">DEFM "SPACE"</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="901a"></span>901A</td>
<td class="instruction">DEFB $10,$06</td>
<td class="comment-1" rowspan="1">INK 6.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="901c"></span>901C</td>
<td class="instruction">DEFB $11,$00</td>
<td class="comment-1" rowspan="1">PAPER 0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="901e"></span>901E</td>
<td class="instruction">DEFB $12,$00</td>
<td class="comment-1" rowspan="1">FLASH "OFF".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9020"></span>9020</td>
<td class="instruction">DEFB $13,$00</td>
<td class="comment-1" rowspan="1">BRIGHT "OFF".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9022"></span>9022</td>
<td class="instruction">DEFM " KEY FOR MORE!"</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9030"></span>9030</td>
<td class="instruction">DEFB $16,$0F,$0D</td>
<td class="comment-1" rowspan="1">PRINT AT (15, 13).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9033"></span>9033</td>
<td class="instruction">DEFB $10,$06</td>
<td class="comment-1" rowspan="1">INK 6.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9035"></span>9035</td>
<td class="instruction">DEFB $11,$02</td>
<td class="comment-1" rowspan="1">PAPER 2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9037"></span>9037</td>
<td class="instruction">DEFB $12,$01</td>
<td class="comment-1" rowspan="1">FLASH "ON".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9039"></span>9039</td>
<td class="instruction">DEFB $13,$01</td>
<td class="comment-1" rowspan="1">BRIGHT "ON".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="903b"></span>903B</td>
<td class="instruction">DEFM "FIRE"</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="903f"></span>903F</td>
<td class="instruction">DEFB $10,$06</td>
<td class="comment-1" rowspan="1">INK 6.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9041"></span>9041</td>
<td class="instruction">DEFB $11,$00</td>
<td class="comment-1" rowspan="1">PAPER 0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9043"></span>9043</td>
<td class="instruction">DEFB $12,$00</td>
<td class="comment-1" rowspan="1">FLASH "OFF".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9045"></span>9045</td>
<td class="instruction">DEFB $13,$00</td>
<td class="comment-1" rowspan="1">BRIGHT "OFF".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9047"></span>9047</td>
<td class="instruction">DEFM " "</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">Congrats_Keyboard</td>
<td class="address-2"><span id="9048"></span>9048</td>
<td class="instruction">LD A,($5BA8)</td>
<td class="comment-1" rowspan="3">Return if <a href="5BA8.html">ControlMethod</a> is 01 (keyboard).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="904b"></span>904B</td>
<td class="instruction">CP $01</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="904d"></span>904D</td>
<td class="instruction">RET Z</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="904e"></span>904E</td>
<td class="instruction">LD DE,$9030</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="8F2A.html#9030">9030</a> (text).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9051"></span>9051</td>
<td class="instruction">LD BC,$0018</td>
<td class="comment-1" rowspan="1"><span class="register">BC</span>=18 (counter).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9054"></span>9054</td>
<td class="instruction">CALL $203C</td>
<td class="comment-1" rowspan="1">Call <a href="https://skoolkit.ca/disassemblies/rom/hex/asm/1FFC.html#203C">PR_STRING</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9057"></span>9057</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9058"></span>
<div class="comments">
<div class="paragraph">
Loops until "fire" is pressed from the Kempston joystick.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Congrats_Joystick</td>
<td class="address-2"><span id="9058"></span>9058</td>
<td class="instruction">IN A,($1F)</td>
<td class="comment-1" rowspan="1">Read Kempston Joystick input.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="905a"></span>905A</td>
<td class="instruction">AND %00010000</td>
<td class="comment-1" rowspan="1">Keep only bit 4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="905c"></span>905C</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1">Only return when fire button is pressed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="905d"></span>905D</td>
<td class="instruction">JP <a href="8F2A.html#9058">Congrats_Joystick</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="8F2A.html#9058">Congrats_Joystick</a>.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="8F14.html">8F14</a>
</td>
<td class="up">Up: <a href="../maps/all.html#8f2a">Map</a></td>
<td class="next">
Next: <a href="9060.html">9060</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; Mastertronic Ltd 1985 &copy; 2023 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/jasons-gem/">Source code</a>.</div>
<div><a href="../dec/asm/36650.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>